{
    "sourceFile": "tests/config_test.go",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1772220323763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1772220323763,
            "name": "Commit-0",
            "content": "package config_test\n\nimport (\n\t\"os\"\n\t\"testing\"\n\n\t\"github.com/km-arc/go-laravel\"\n)\n\n// ── helpers ──────────────────────────────────────────────────────────────────\n\nfunc setEnv(t *testing.T, key, val string) {\n\tt.Helper()\n\tt.Setenv(key, val) // automatically restored after test\n}\n\n// ── Load ─────────────────────────────────────────────────────────────────────\n\nfunc TestLoad_Defaults(t *testing.T) {\n\t// No env set → verify all defaults\n\tcfg := config.Load(\"testdata/empty.env\")\n\n\ttests := []struct {\n\t\tname string\n\t\tgot  string\n\t\twant string\n\t}{\n\t\t{\"App.Name\", cfg.App.Name, \"GoLaravel\"},\n\t\t{\"App.Env\", cfg.App.Env, \"local\"},\n\t\t{\"App.Port\", cfg.App.Port, \"8000\"},\n\t\t{\"DB.Driver\", cfg.DB.Driver, \"mysql\"},\n\t\t{\"DB.Host\", cfg.DB.Host, \"127.0.0.1\"},\n\t\t{\"DB.Port\", cfg.DB.Port, \"3306\"},\n\t\t{\"DB.Username\", cfg.DB.Username, \"root\"},\n\t\t{\"Mail.Driver\", cfg.Mail.Driver, \"smtp\"},\n\t\t{\"Mail.Port\", cfg.Mail.Port, \"587\"},\n\t}\n\n\tfor _, tt := range tests {\n\t\tt.Run(tt.name, func(t *testing.T) {\n\t\t\tif tt.got != tt.want {\n\t\t\t\tt.Errorf(\"got %q, want %q\", tt.got, tt.want)\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestLoad_EnvOverridesDefaults(t *testing.T) {\n\tsetEnv(t, \"APP_NAME\", \"MyApp\")\n\tsetEnv(t, \"APP_ENV\", \"production\")\n\tsetEnv(t, \"APP_PORT\", \"9000\")\n\tsetEnv(t, \"DB_DATABASE\", \"mydb\")\n\n\tcfg := config.Load()\n\n\tif cfg.App.Name != \"MyApp\" {\n\t\tt.Errorf(\"App.Name: got %q want %q\", cfg.App.Name, \"MyApp\")\n\t}\n\tif cfg.App.Env != \"production\" {\n\t\tt.Errorf(\"App.Env: got %q want %q\", cfg.App.Env, \"production\")\n\t}\n\tif cfg.App.Port != \"9000\" {\n\t\tt.Errorf(\"App.Port: got %q want %q\", cfg.App.Port, \"9000\")\n\t}\n\tif cfg.DB.Database != \"mydb\" {\n\t\tt.Errorf(\"DB.Database: got %q want %q\", cfg.DB.Database, \"mydb\")\n\t}\n}\n\nfunc TestLoad_AppDebugTrue(t *testing.T) {\n\tsetEnv(t, \"APP_DEBUG\", \"true\")\n\tcfg := config.Load()\n\tif !cfg.App.Debug {\n\t\tt.Error(\"expected App.Debug to be true\")\n\t}\n}\n\nfunc TestLoad_AppDebugFalse(t *testing.T) {\n\tsetEnv(t, \"APP_DEBUG\", \"false\")\n\tcfg := config.Load()\n\tif cfg.App.Debug {\n\t\tt.Error(\"expected App.Debug to be false\")\n\t}\n}\n\n// ── Get / GetInt / GetBool ───────────────────────────────────────────────────\n\nfunc TestGet_ReturnsValue(t *testing.T) {\n\tsetEnv(t, \"CUSTOM_KEY\", \"hello\")\n\tif got := config.Get(\"CUSTOM_KEY\", \"default\"); got != \"hello\" {\n\t\tt.Errorf(\"got %q want %q\", got, \"hello\")\n\t}\n}\n\nfunc TestGet_ReturnsFallback(t *testing.T) {\n\tos.Unsetenv(\"MISSING_KEY\")\n\tif got := config.Get(\"MISSING_KEY\", \"fallback\"); got != \"fallback\" {\n\t\tt.Errorf(\"got %q want %q\", got, \"fallback\")\n\t}\n}\n\nfunc TestGetInt_ReturnsInt(t *testing.T) {\n\tsetEnv(t, \"SOME_INT\", \"42\")\n\tif got := config.GetInt(\"SOME_INT\", 0); got != 42 {\n\t\tt.Errorf(\"got %d want %d\", got, 42)\n\t}\n}\n\nfunc TestGetInt_ReturnsFallbackOnInvalid(t *testing.T) {\n\tsetEnv(t, \"SOME_INT\", \"notanint\")\n\tif got := config.GetInt(\"SOME_INT\", 99); got != 99 {\n\t\tt.Errorf(\"got %d want %d\", got, 99)\n\t}\n}\n\nfunc TestGetBool_True(t *testing.T) {\n\tfor _, val := range []string{\"true\", \"1\", \"True\", \"TRUE\"} {\n\t\tsetEnv(t, \"BOOL_KEY\", val)\n\t\tif !config.GetBool(\"BOOL_KEY\", false) {\n\t\t\tt.Errorf(\"expected true for %q\", val)\n\t\t}\n\t}\n}\n\nfunc TestGetBool_False(t *testing.T) {\n\tsetEnv(t, \"BOOL_KEY\", \"false\")\n\tif config.GetBool(\"BOOL_KEY\", true) {\n\t\tt.Error(\"expected false\")\n\t}\n}\n\nfunc TestGetBool_ReturnsFallbackOnInvalid(t *testing.T) {\n\tsetEnv(t, \"BOOL_KEY\", \"notabool\")\n\tif config.GetBool(\"BOOL_KEY\", true) != true {\n\t\tt.Error(\"expected fallback true\")\n\t}\n}\n"
        }
    ]
}